export const INITIAL_STATE = {
	isValid: {
		post: true,
		title: true,
		tag: true,
		date: true 
	},
	values: {
		post:  '',
		title: '',
		tag: '',
		date: '', 
	},
	isFormReadyToSubmit: false
};

export function formReducer(state, action){
	switch(action.type){
		case ('RESET_VALIDITY'):
			return {...state, isValid: INITIAL_STATE.isValid}    
		case ('UPDATE_VALUE'): {
			const { name, value } = action.payload; // Динамическое обновление по name
      return {
        ...state,
        values: {
          ...state.values,
          [name]: value, // Обновляем конкретное поле (title, date, tag или post)
        },
      };
		}
		case ('SUBMIT'): {
			const titleValidity =  action.payload.title?.trim().length;
			const postValidity = action.payload.post?.trim().length;
			const tagValidity = action.payload.tag?.trim().length;
			const dateValidity = action.payload.date;
		  return {
				values: action.payload,
				isValid: {
					post: postValidity,
					title: titleValidity,
					tag: tagValidity,
					date: dateValidity 
				},
				isFormReadyToSubmit: postValidity && titleValidity && tagValidity && dateValidity
			}
		}
		case ('CLEAR_FORM'): 
			return{...state, values: INITIAL_STATE.values}
	}

}